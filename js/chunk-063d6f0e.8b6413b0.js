(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-063d6f0e"],{"00b1":function(t,a,e){"use strict";var s=e("e678"),i=e.n(s);i.a},"159b":function(t,a,e){var s=e("da84"),i=e("fdbc"),n=e("17c2"),r=e("9112");for(var o in i){var c=s[o],l=c&&c.prototype;if(l&&l.forEach!==n)try{r(l,"forEach",n)}catch(d){l.forEach=n}}},"17c2":function(t,a,e){"use strict";var s=e("b727").forEach,i=e("a640"),n=e("ae40"),r=i("forEach"),o=n("forEach");t.exports=r&&o?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},"1e4b":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"indexLabel"},[e("div",{staticClass:"header"},[e("div",{staticClass:"header-icon"},[e("router-link",{attrs:{to:"/"}},[e("span",{staticClass:"iconfont iconnew"})])],1),e("div",{staticClass:"header-content"},[e("div",{staticClass:"header-search",on:{click:function(a){return t.$router.push("/search")}}},[e("span",{staticClass:"iconfont iconsearch"}),t._v(" "),e("span",[t._v("搜索新闻")])])]),e("div",{staticClass:"header-personpage"},[e("router-link",{attrs:{to:"/personalPage"}},[e("span",{staticClass:"iconfont iconwode"})])],1)]),e("div",{staticClass:"tabs"},[e("div",{staticClass:"tabs-left"},[e("van-tabs",{attrs:{sticky:"",swipeable:""},on:{scroll:t.scrollTop},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},t._l(t.categorys,(function(a,s){return e("van-tab",{key:s,attrs:{title:a.name}},[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(a){t.refreshing=a},expression:"refreshing"}},[e("van-list",{attrs:{"immediate-check":!1,finished:t.categorys[t.active].finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.categorys[t.active].loading,callback:function(a){t.$set(t.categorys[t.active],"loading",a)},expression:"categorys[active].loading"}},t._l(t.categorys[t.active].posts,(function(a,s){return e("div",{key:s},[1==a.cover.length&&1==a.type?e("postItem1",{attrs:{data:a},nativeOn:{click:function(e){return t.$router.push("/newsarticledetail/"+a.id)}}}):t._e(),a.cover.length>=3&&1==a.type?e("postItem2",{attrs:{data:a},nativeOn:{click:function(e){return t.$router.push("/newsarticledetail/"+a.id)}}}):t._e(),2==a.type?e("postItem3",{attrs:{data:a},nativeOn:{click:function(e){return t.$router.push("/newsvideodetail/"+a.id)}}}):t._e()],1)})),0)],1)],1)})),1)],1),e("div",{staticClass:"tabs-right"},[e("div",{staticClass:"type-icon"},[e("router-link",{attrs:{to:"/categorymanage"}},[e("span",{staticClass:"iconfont iconjiantou"})])],1)])])])},i=[],n=(e("99af"),e("4160"),e("d81d"),e("b0c0"),e("d3b7"),e("25f0"),e("159b"),e("2909")),r=e("dfc1"),o=e("a07d"),c=e("b8ce"),l={name:"index",data:function(){return{refreshing:!1,pageSize:6,active:0,categorys:[],categoryId:0}},activated:function(){},mounted:function(){this.reload()},methods:{reload:function(){var t=JSON.parse(localStorage.getItem("news_User_Data"))||{},a=t.token,e=JSON.parse(localStorage.getItem("categorys"));if(e){if("关注"===e[0].name&&!a)return void this.initCategorys({url:"/category",method:"get"});if("关注"!==e[0].name&&a)return void this.initCategorys({url:"/category",method:"get",headers:{Authorization:a||""}});this.categorys=e,this.initPageIndex(),this.initData()}else this.initCategorys({url:"/category",method:"get",headers:{Authorization:a||""}})},initCategorys:function(t){var a=this;this.$axios(t).then((function(t){var e=t.data.data;a.categorys=e,localStorage.setItem("categorys",JSON.stringify(a.categorys)),a.initPageIndex(),a.initData(),localStorage.removeItem("addCategorys")}))},initPageIndex:function(){this.categorys=this.categorys.map((function(t){return t.pageIndex=1,t.posts=[],t.loading=!1,t.finished=!1,t.scrollTop=0,t.isLoad=!1,t}))},initData:function(){var t=this;if(!this.categorys[this.active].finished&&!this.categorys[this.active].isLoad){this.categorys[this.active].isLoad=!0;var a=JSON.parse(localStorage.getItem("news_User_Data"))||{},e=a.token;this.$axios({url:"/post",method:"get",params:{pageIndex:this.categorys[this.active].pageIndex,pageSize:this.pageSize,category:this.categoryId},headers:{Authorization:e||""}}).then((function(a){var e=a.data,s=e.data,i=e.total;0!=s.length&&(s.forEach((function(a){3==a.cover.length&&(a.posters=a.cover.map((function(a){return t.$axios.defaults.baseURL+a.url})).toString())})),t.categorys[t.active].loading=!1,t.categorys[t.active].posts=[].concat(Object(n["a"])(t.categorys[t.active].posts),Object(n["a"])(s)),t.categorys=Object(n["a"])(t.categorys),t.categorys[t.active].posts.length>=i&&(t.categorys[t.active].finished=!0,t.categorys[t.active].isLoad=!0),t.refreshing=!1,t.categorys[t.active].isLoad=!1,t.categorys[t.active].pageIndex++)})),this.categorys[this.active].isLoad=!0}},onLoad:function(){this.initData()},scrollTop:function(t){var a=this,e=t.scrollTop;setTimeout((function(){a.categorys[a.active]&&(a.categorys[a.active].scrollTop=e)}),10)},onRefresh:function(){this.categorys[this.active].pageIndex=1,this.categorys[this.active].finished=!1,this.categorys[this.active].posts=[],this.initData()}},watch:{active:function(){var t=this;this.categoryId=this.categorys[this.active].id,this.pageIndex=1,this.initData(),setTimeout((function(){document.documentElement.scrollTo(0,t.categorys[t.active].scrollTop)}),10)}},components:{postItem1:r["a"],postItem2:o["a"],postItem3:c["a"]},beforeRouteEnter:function(t,a,e){e((function(t){!a||"/categorymanage"!=a.path&&"/personalPage"!=a.path&&"/login"!=a.path||t.reload()}))}},d=l,u=(e("6e9f"),e("2877")),f=Object(u["a"])(d,s,i,!1,null,"f3998926",null);a["default"]=f.exports},4160:function(t,a,e){"use strict";var s=e("23e7"),i=e("17c2");s({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"4a93":function(t,a,e){"use strict";var s=e("6128"),i=e.n(s);i.a},6128:function(t,a,e){},"648c":function(t,a,e){},"6e9f":function(t,a,e){"use strict";var s=e("648c"),i=e.n(s);i.a},"99af":function(t,a,e){"use strict";var s=e("23e7"),i=e("d039"),n=e("e8b5"),r=e("861d"),o=e("7b0b"),c=e("50c4"),l=e("8418"),d=e("65f0"),u=e("1dde"),f=e("b622"),v=e("2d00"),h=f("isConcatSpreadable"),g=9007199254740991,p="Maximum allowed index exceeded",y=v>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),m=u("concat"),b=function(t){if(!r(t))return!1;var a=t[h];return void 0!==a?!!a:n(t)},_=!y||!m;s({target:"Array",proto:!0,forced:_},{concat:function(t){var a,e,s,i,n,r=o(this),u=d(r,0),f=0;for(a=-1,s=arguments.length;a<s;a++)if(n=-1===a?r:arguments[a],b(n)){if(i=c(n.length),f+i>g)throw TypeError(p);for(e=0;e<i;e++,f++)e in n&&l(u,f,n[e])}else{if(f>=g)throw TypeError(p);l(u,f++,n)}return u.length=f,u}})},"9e5b":function(t,a,e){"use strict";var s=e("bef2"),i=e.n(s);i.a},a07d:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"star-card"},[e("div",{staticClass:"star-top"},[e("p",{staticClass:"title"},[t._v(t._s(t.data.title))])]),e("div",{staticClass:"star-center"},[e("div",{staticClass:"images"},t._l(t.data.posters.split(","),(function(a,s){return e("div",{key:s,staticClass:"item"},[e("van-image",{attrs:{src:t.$axios.defaults.baseURL+t.data.cover[0].url},scopedSlots:t._u([{key:"loading",fn:function(){return[e("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}],null,!0)})],1)})),0)]),e("div",{staticClass:"star-bottom"},[e("p",{staticClass:"details"},[e("span",[t._v(t._s(t.data.user.nickname))]),e("span",[t._v(t._s(t.data.comment_length)+" 跟帖")])])])])},i=[],n={props:["title","nickname","size","posters","data"]},r=n,o=(e("00b1"),e("2877")),c=Object(o["a"])(r,s,i,!1,null,"66a8ff2a",null);a["a"]=c.exports},a640:function(t,a,e){"use strict";var s=e("d039");t.exports=function(t,a){var e=[][t];return!!e&&s((function(){e.call(null,a||function(){throw 1},1)}))}},b8ce:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"star-video"},[e("div",{staticClass:"star-top"},[e("p",{staticClass:"title"},[t._v(t._s(t.data.title))])]),e("div",{staticClass:"star-center"},[e("div",{staticClass:"video-poster"},[e("img",{attrs:{src:t.$axios.defaults.baseURL+t.data.cover[0].url}}),t._m(0)])]),e("div",{staticClass:"star-bottom"},[e("p",{staticClass:"details"},[e("span",[t._v(t._s(t.data.user.nickname))]),e("span",[t._v(t._s(t.data.comment_length)+" 跟帖")])])])])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"video-start"},[e("span",{staticClass:"iconfont iconshipin"})])}],n={props:["data"]},r=n,o=(e("9e5b"),e("2877")),c=Object(o["a"])(r,s,i,!1,null,"708fe999",null);a["a"]=c.exports},bef2:function(t,a,e){},d81d:function(t,a,e){"use strict";var s=e("23e7"),i=e("b727").map,n=e("1dde"),r=e("ae40"),o=n("map"),c=r("map");s({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dfc1:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"star-item"},[e("div",{staticClass:"star-left"},[e("p",{staticClass:"title"},[t._v(t._s(t.data.title))]),e("p",{staticClass:"details"},[e("span",[t._v(t._s(t.data.user.nickname))]),e("span",[t._v(t._s(t.data.comment_length)+" 跟帖")])])]),e("div",{staticClass:"star-right"},[e("div",{staticClass:"images"},[e("div",{staticClass:"item"},[e("van-image",{attrs:{src:t.$axios.defaults.baseURL+t.data.cover[0].url},scopedSlots:t._u([{key:"loading",fn:function(){return[e("van-loading",{attrs:{type:"spinner",size:"20"}})]},proxy:!0}])})],1)])])])},i=[],n={props:["data"]},r=n,o=(e("4a93"),e("2877")),c=Object(o["a"])(r,s,i,!1,null,"8ef03d92",null);a["a"]=c.exports},e678:function(t,a,e){}}]);
//# sourceMappingURL=chunk-063d6f0e.8b6413b0.js.map