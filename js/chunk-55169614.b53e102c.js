(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55169614"],{"0884":function(t,a,e){},"159b":function(t,a,e){var s=e("da84"),i=e("fdbc"),n=e("17c2"),r=e("9112");for(var c in i){var o=s[c],l=o&&o.prototype;if(l&&l.forEach!==n)try{r(l,"forEach",n)}catch(d){l.forEach=n}}},"17c2":function(t,a,e){"use strict";var s=e("b727").forEach,i=e("a640"),n=e("ae40"),r=i("forEach"),c=n("forEach");t.exports=r&&c?[].forEach:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}},"1e4b":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"indexLabel"},[e("div",{staticClass:"header"},[e("div",{staticClass:"header-icon"},[e("router-link",{attrs:{to:"/"}},[e("span",{staticClass:"iconfont iconnew"})])],1),e("div",{staticClass:"header-content"},[e("div",{staticClass:"header-search",on:{click:function(a){return t.$router.push("/search")}}},[e("span",{staticClass:"iconfont iconsearch"}),t._v(" "),e("span",[t._v("搜索新闻")])])]),e("div",{staticClass:"header-personpage"},[e("router-link",{attrs:{to:"/personalPage"}},[e("span",{staticClass:"iconfont iconwode"})])],1)]),e("div",{staticClass:"tabs"},[e("div",{staticClass:"tabs-left"},[e("van-tabs",{attrs:{sticky:"",swipeable:""},on:{scroll:t.scrollTop},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},t._l(t.categories,(function(a,s){return e("van-tab",{key:s,attrs:{title:a.name}},[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(a){t.refreshing=a},expression:"refreshing"}},[e("van-list",{attrs:{"immediate-check":!1,finished:t.categories[t.active].finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.categories[t.active].loading,callback:function(a){t.$set(t.categories[t.active],"loading",a)},expression:"categories[active].loading"}},t._l(t.categories[t.active].posts,(function(a,s){return e("div",{key:s},[1==a.cover.length&&1==a.type?e("postItem1",{attrs:{data:a},nativeOn:{click:function(e){return t.$router.push("/newsarticledetail/"+a.id)}}}):t._e(),a.cover.length>=3&&1==a.type?e("postItem2",{attrs:{data:a},nativeOn:{click:function(e){return t.$router.push("/newsarticledetail/"+a.id)}}}):t._e(),2==a.type?e("postItem3",{attrs:{data:a},nativeOn:{click:function(e){return t.$router.push("/newsvideodetail/"+a.id)}}}):t._e()],1)})),0)],1)],1)})),1)],1),e("div",{staticClass:"tabs-right"},[e("div",{staticClass:"type-icon"},[e("router-link",{attrs:{to:"/categorymanage"}},[e("span",{staticClass:"iconfont iconjiantou"})])],1)])])])},i=[],n=(e("99af"),e("4160"),e("d81d"),e("b0c0"),e("d3b7"),e("25f0"),e("159b"),e("2909")),r=e("dfc1"),c=e("a07d"),o=e("b8ce"),l={name:"index",data:function(){return{refreshing:!1,pageSize:10,active:0,categories:[],categoryId:0}},activated:function(){console.log(123)},mounted:function(){var t=JSON.parse(localStorage.getItem("news_User_Data"))||{},a=t.token,e=JSON.parse(localStorage.getItem("categorys"));if(e){if("关注"===e[0].name&&!a)return void this.initCategorys({url:"/category",method:"get"});if("关注"!==e[0].name&&a)return void this.initCategorys({url:"/category",method:"get",headers:{Authorization:a||""}});this.categories=e,this.initPageIndex(),this.initData()}else this.initCategorys({url:"/category",method:"get",headers:{Authorization:a||""}})},methods:{initCategorys:function(t){var a=this;this.$axios(t).then((function(t){var e=t.data.data;a.categories=e,localStorage.setItem("categorys",JSON.stringify(a.categories)),a.initPageIndex(),a.initData(),localStorage.removeItem("addCategorys")}))},initPageIndex:function(){this.categories=this.categories.map((function(t){return t.pageIndex=1,t.posts=[],t.loading=!1,t.finished=!1,t.scrollTop=0,t.isLoad=!1,t}))},initData:function(){var t=this;if(!this.categories[this.active].finished&&!this.categories[this.active].isLoad){this.categories[this.active].isLoad=!0;var a=JSON.parse(localStorage.getItem("news_User_Data"))||{},e=a.token;this.$axios({url:"/post",method:"get",params:{pageIndex:this.categories[this.active].pageIndex,pageSize:this.pageSize,category:this.categoryId},headers:{Authorization:e||""}}).then((function(a){var e=a.data,s=e.data,i=e.total;s.forEach((function(a){3==a.cover.length&&(a.posters=a.cover.map((function(a){return t.$axios.defaults.baseURL+a.url})).toString())})),t.categories[t.active].loading=!1,t.categories[t.active].posts=[].concat(Object(n["a"])(t.categories[t.active].posts),Object(n["a"])(s)),t.categories=Object(n["a"])(t.categories),t.categories[t.active].posts.length>=i&&(t.categories[t.active].finished=!0,t.categories[t.active].isLoad=!0),t.categories[t.active].isLoad=!1,t.categories[t.active].pageIndex++})),this.categories[this.active].isLoad=!0}},onLoad:function(){this.initData()},scrollTop:function(t){var a=this,e=t.scrollTop;setTimeout((function(){a.categories[a.active]&&(a.categories[a.active].scrollTop=e)}),10)},onRefresh:function(){}},watch:{active:function(){var t=this;this.categoryId=this.categories[this.active].id,this.pageIndex=1,this.initData(),setTimeout((function(){document.documentElement.scrollTo(0,t.categories[t.active].scrollTop)}),10)}},components:{postItem1:r["a"],postItem2:c["a"],postItem3:o["a"]}},d=l,u=(e("292f"),e("2877")),f=Object(u["a"])(d,s,i,!1,null,"429fd4b4",null);a["default"]=f.exports},"292f":function(t,a,e){"use strict";var s=e("ad8c"),i=e.n(s);i.a},"312c":function(t,a,e){"use strict";var s=e("0884"),i=e.n(s);i.a},4160:function(t,a,e){"use strict";var s=e("23e7"),i=e("17c2");s({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"6a7c":function(t,a,e){"use strict";var s=e("a494"),i=e.n(s);i.a},"99af":function(t,a,e){"use strict";var s=e("23e7"),i=e("d039"),n=e("e8b5"),r=e("861d"),c=e("7b0b"),o=e("50c4"),l=e("8418"),d=e("65f0"),u=e("1dde"),f=e("b622"),v=e("2d00"),h=f("isConcatSpreadable"),g=9007199254740991,p="Maximum allowed index exceeded",m=v>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),b=u("concat"),C=function(t){if(!r(t))return!1;var a=t[h];return void 0!==a?!!a:n(t)},_=!m||!b;s({target:"Array",proto:!0,forced:_},{concat:function(t){var a,e,s,i,n,r=c(this),u=d(r,0),f=0;for(a=-1,s=arguments.length;a<s;a++)if(n=-1===a?r:arguments[a],C(n)){if(i=o(n.length),f+i>g)throw TypeError(p);for(e=0;e<i;e++,f++)e in n&&l(u,f,n[e])}else{if(f>=g)throw TypeError(p);l(u,f++,n)}return u.length=f,u}})},"9e5b":function(t,a,e){"use strict";var s=e("bef2"),i=e.n(s);i.a},a07d:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"star-card"},[e("div",{staticClass:"star-top"},[e("p",{staticClass:"title"},[t._v(t._s(t.data.title))])]),e("div",{staticClass:"star-center"},[e("div",{staticClass:"images"},t._l(t.data.posters.split(","),(function(t,a){return e("div",{key:a,staticClass:"item"},[e("img",{attrs:{src:t}})])})),0)]),e("div",{staticClass:"star-bottom"},[e("p",{staticClass:"details"},[e("span",[t._v(t._s(t.data.user.nickname))]),e("span",[t._v(t._s(t.data.comment_length)+" 跟帖")])])])])},i=[],n={props:["title","nickname","size","posters","data"]},r=n,c=(e("312c"),e("2877")),o=Object(c["a"])(r,s,i,!1,null,"680731cb",null);a["a"]=o.exports},a494:function(t,a,e){},a640:function(t,a,e){"use strict";var s=e("d039");t.exports=function(t,a){var e=[][t];return!!e&&s((function(){e.call(null,a||function(){throw 1},1)}))}},ad8c:function(t,a,e){},b8ce:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"star-video"},[e("div",{staticClass:"star-top"},[e("p",{staticClass:"title"},[t._v(t._s(t.data.title))])]),e("div",{staticClass:"star-center"},[e("div",{staticClass:"video-poster"},[e("img",{attrs:{src:t.$axios.defaults.baseURL+t.data.cover[0].url}}),t._m(0)])]),e("div",{staticClass:"star-bottom"},[e("p",{staticClass:"details"},[e("span",[t._v(t._s(t.data.user.nickname))]),e("span",[t._v(t._s(t.data.comment_length)+" 跟帖")])])])])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"video-start"},[e("span",{staticClass:"iconfont iconshipin"})])}],n={props:["data"]},r=n,c=(e("9e5b"),e("2877")),o=Object(c["a"])(r,s,i,!1,null,"708fe999",null);a["a"]=o.exports},bef2:function(t,a,e){},d81d:function(t,a,e){"use strict";var s=e("23e7"),i=e("b727").map,n=e("1dde"),r=e("ae40"),c=n("map"),o=r("map");s({target:"Array",proto:!0,forced:!c||!o},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dfc1:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"star-item"},[e("div",{staticClass:"star-left"},[e("p",{staticClass:"title"},[t._v(t._s(t.data.title))]),e("p",{staticClass:"details"},[e("span",[t._v(t._s(t.data.user.nickname))]),e("span",[t._v(t._s(t.data.comment_length)+" 跟帖")])])]),e("div",{staticClass:"star-right"},[e("div",{staticClass:"images"},[e("div",{staticClass:"item"},[e("img",{attrs:{src:t.$axios.defaults.baseURL+t.data.cover[0].url}})])])])])},i=[],n={props:["data"]},r=n,c=(e("6a7c"),e("2877")),o=Object(c["a"])(r,s,i,!1,null,"4312501c",null);a["a"]=o.exports}}]);
//# sourceMappingURL=chunk-55169614.b53e102c.js.map