(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-515ebb37"],{"122b":function(e,t,a){},1451:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"toplabel"},[a("span",{staticClass:"iconfont iconjiantou",on:{click:function(t){return e.$router.back()}}}),a("strong",[e._v(e._s(e.centerText))]),0==e.showIcon?a("span",{staticClass:"iconfont iconshouye",on:{click:function(t){return e.$router.push("/")}}}):e._e(),1==e.showIcon?a("span",{staticClass:"iconfont iconshouye",staticStyle:{opacity:"0"},on:{click:function(t){return e.$router.push("/")}}}):e._e()])},n=[],i={props:["centerText","showIcon"]},o=i,c=(a("f2fd"),a("2877")),r=Object(c["a"])(o,s,n,!1,null,"72ac4ca8",null);t["a"]=r.exports},"22e4":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"messageReply"},[a("top",{attrs:{centerText:"精彩跟帖",showIcon:"1"}}),a("div",{staticClass:"moments"},[e.messages.length>0?a("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.messages,(function(t,s){return a("div",{key:s,staticClass:"messageItem"},[a("div",{staticClass:"messageDetail"},[a("div",{staticClass:"item_left"},[a("div",{staticClass:"head_img"},[a("img",{attrs:{src:e.$axios.defaults.baseURL+(t.user.head_img||"/uploads/image/IMG1585540477344.jpeg")}})]),a("div",{staticClass:"user_detail"},[a("p",[e._v(e._s(t.user.nickname)+" "),a("span",{staticClass:"iconfont iconnew",staticStyle:{"font-size":"25px",color:"red"}})]),a("em",[e._v(e._s(e.moment(t.create_date).format("YYYY-MM-DD HH:SS")))]),a("em",[e._v(e._s(e.moment(t.create_date).fromNow()))])])]),a("div",{staticClass:"item_right",on:{click:function(a){return e.reply(t)}}},[e._v(" 回复 ")])]),a("div",{staticClass:"messageContent"},[t.parent?a("MessageItem",{attrs:{data:t.parent},on:{handleReply:e.reply}}):e._e(),e._v(" "+e._s(t.content)+" ")],1)])})),0):a("div",{staticClass:"nocomments"},[e._v(" 暂无跟帖，抢占沙发 (〜￣△￣)〜 ")])],1),a("div",{staticClass:"replyMessage"},[e.focus?e._e():a("van-field",{staticClass:"vanfidld1",attrs:{rows:"2",autosize:"",type:"textarea",maxlength:"50",placeholder:e.checkplaceholder,"show-word-limit":""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),a("div",{staticClass:"replyRight"},[a("span",{on:{click:e.sendComment}},[e._v("发送")]),a("span",{on:{click:e.clearComment}},[e._v("清除")])])],1)],1)},n=[],i=(a("99af"),a("2909")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"messagereply"},[a("div",{staticClass:"message"},[a("div",{staticClass:"detail"},[a("div",{staticClass:"nickanme"},[e._v(e._s(e.data.user.nickname))]),a("div",{staticClass:"data"},[e._v(e._s(e.moment(e.data.create_date).fromNow()))]),a("div",{staticClass:"huifu",on:{click:function(t){return e.childReply(e.data)}}},[e._v("回复")])]),a("div",{staticClass:"content"},[e._v(" "+e._s(e.data.content)+" ")]),e.data.parent?a("div",[a("messageReply",{attrs:{data:e.data.parent},on:{handleReply:e.childReply}})],1):e._e()])])},c=[],r=a("c1df"),l=a.n(r),d={data:function(){return{moment:l.a}},methods:{childReply:function(e){this.$emit("handleReply",e)}},name:"messageReply",props:["data"]},u=d,m=(a("e7bd"),a("2877")),h=Object(m["a"])(u,o,c,!1,null,"33c8bdcf",null),p=h.exports,f=a("1451");l.a.locale("zh-CN");var g={data:function(){return{checkplaceholder:"发表评论 (@某人时需要在@符号后接一个空格，举个栗子 @ 新闻小管家 )",postId:"",parentId:"",loading:!1,finished:!1,messages:[],message:"",pageSize:5,pageIndex:1,focus:!1,moment:l.a}},components:{MessageItem:p,top:f["a"]},methods:{clearComment:function(){this.checkplaceholder="发表评论 (@某人时需要在@符号后接一个空格，举个栗子 @ 新闻小管家 )",this.message="",this.parentId=void 0},reply:function(e){this.checkplaceholder="@".concat(e.user.nickname),this.parentId=e.id},sendComment:function(){var e=JSON.parse(localStorage.getItem("news_User_Data"))||{},t=e.token;t||this.$router.push({path:"/login",query:{returnUrl:this.$route.fullPath}});var a=this.parentId||void 0,s=this.message;new Date;this.sendCommentToServe({content:s,parent_id:a||void 0}),this.message=""},sendCommentToServe:function(e){var t=this,a=JSON.parse(localStorage.getItem("news_User_Data")),s=a.token;this.$axios({url:"/post_comment/".concat(this.$route.params.id),method:"post",data:e,headers:{Authorization:s||""}}).then((function(e){t.$toast.success("评论成功"),t.loading=!1,t.finished=!1,t.messages=[],t.pageIndex=1,t.getList()}))},onLoad:function(){this.pageIndex++,this.loading=!1,this.getList()},getList:function(){var e=this;this.$axios({url:"/post_comment/".concat(this.$route.params.id),params:{pageSize:this.pageSize,pageIndex:this.pageIndex},method:"get"}).then((function(t){var a=t.data;e.messages=[].concat(Object(i["a"])(e.messages),Object(i["a"])(a.data)),e.loading=!1,a.data.length<e.pageSize&&(e.finished=!0)}))}},mounted:function(){this.postId=this.$route.params.id,this.getList()}},v=g,_=(a("8d7d"),Object(m["a"])(v,s,n,!1,null,"4e478d62",null));t["default"]=_.exports},"3cc6":function(e,t,a){},"8d7d":function(e,t,a){"use strict";var s=a("122b"),n=a.n(s);n.a},"99af":function(e,t,a){"use strict";var s=a("23e7"),n=a("d039"),i=a("e8b5"),o=a("861d"),c=a("7b0b"),r=a("50c4"),l=a("8418"),d=a("65f0"),u=a("1dde"),m=a("b622"),h=a("2d00"),p=m("isConcatSpreadable"),f=9007199254740991,g="Maximum allowed index exceeded",v=h>=51||!n((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),_=u("concat"),C=function(e){if(!o(e))return!1;var t=e[p];return void 0!==t?!!t:i(e)},y=!v||!_;s({target:"Array",proto:!0,forced:y},{concat:function(e){var t,a,s,n,i,o=c(this),u=d(o,0),m=0;for(t=-1,s=arguments.length;t<s;t++)if(i=-1===t?o:arguments[t],C(i)){if(n=r(i.length),m+n>f)throw TypeError(g);for(a=0;a<n;a++,m++)a in i&&l(u,m,i[a])}else{if(m>=f)throw TypeError(g);l(u,m++,i)}return u.length=m,u}})},a735:function(e,t,a){},e7bd:function(e,t,a){"use strict";var s=a("a735"),n=a.n(s);n.a},f2fd:function(e,t,a){"use strict";var s=a("3cc6"),n=a.n(s);n.a}}]);
//# sourceMappingURL=chunk-515ebb37.e6ab6377.js.map